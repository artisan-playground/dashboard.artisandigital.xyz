# Migration `20200909091356-db`

This migration has been generated by Kullanan at 9/9/2020, 4:13:56 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TYPE "public"."Role" AS ENUM ('USER', 'ADMIN')

CREATE TABLE "public"."User" (
"id" SERIAL,
"email" text   NOT NULL ,
"name" text   ,
"image" text   ,
"position" text   ,
"skills" text []  ,
"contactId" integer   NOT NULL ,
"projectId" integer   NOT NULL ,
"taskId" integer   NOT NULL ,
"role" "Role"  NOT NULL DEFAULT E'USER',
PRIMARY KEY ("id")
)

CREATE TABLE "public"."Contact" (
"id" integer   NOT NULL ,
"facebook" text   ,
"twitter" text   ,
"instagram" text   ,
"gitlab" text   ,
"github" text   ,
PRIMARY KEY ("id")
)

CREATE TABLE "public"."Project" (
"id" integer   NOT NULL ,
"projectName" text   ,
"projectType" text   ,
"projectDetail" text   ,
"projectImage" text   ,
"status" text   ,
"dueDate" timestamp(3)   NOT NULL ,
"memberIds" text []  ,
PRIMARY KEY ("id")
)

CREATE TABLE "public"."Task" (
"id" integer   NOT NULL ,
"projectId" text   ,
"taskName" text   ,
"startTime" timestamp(3)   NOT NULL ,
"endTime" timestamp(3)   NOT NULL ,
"taskDetail" text   ,
"isDone" boolean   NOT NULL ,
"memberIds" text []  ,
"fileUid" integer   NOT NULL ,
"commentId" integer   NOT NULL ,
PRIMARY KEY ("id")
)

CREATE TABLE "public"."File" (
"uid" integer   NOT NULL ,
"url" text   ,
"name" text   ,
"status" text   ,
PRIMARY KEY ("uid")
)

CREATE TABLE "public"."Comment" (
"id" integer   NOT NULL ,
"timestamp" timestamp(3)   NOT NULL ,
"userId" text   ,
"image" text   ,
"userImg" text   ,
"userName" text   ,
"message" text   ,
"taskId" text   ,
PRIMARY KEY ("id")
)

CREATE TABLE "public"."_ContactToUser" (
"A" integer   NOT NULL ,
"B" integer   NOT NULL 
)

CREATE TABLE "public"."_ProjectToUser" (
"A" integer   NOT NULL ,
"B" integer   NOT NULL 
)

CREATE TABLE "public"."_TaskToUser" (
"A" integer   NOT NULL ,
"B" integer   NOT NULL 
)

CREATE TABLE "public"."_FileToTask" (
"A" integer   NOT NULL ,
"B" integer   NOT NULL 
)

CREATE TABLE "public"."_CommentToTask" (
"A" integer   NOT NULL ,
"B" integer   NOT NULL 
)

CREATE UNIQUE INDEX "User.email_unique" ON "public"."User"("email")

CREATE UNIQUE INDEX "_ContactToUser_AB_unique" ON "public"."_ContactToUser"("A", "B")

CREATE INDEX "_ContactToUser_B_index" ON "public"."_ContactToUser"("B")

CREATE UNIQUE INDEX "_ProjectToUser_AB_unique" ON "public"."_ProjectToUser"("A", "B")

CREATE INDEX "_ProjectToUser_B_index" ON "public"."_ProjectToUser"("B")

CREATE UNIQUE INDEX "_TaskToUser_AB_unique" ON "public"."_TaskToUser"("A", "B")

CREATE INDEX "_TaskToUser_B_index" ON "public"."_TaskToUser"("B")

CREATE UNIQUE INDEX "_FileToTask_AB_unique" ON "public"."_FileToTask"("A", "B")

CREATE INDEX "_FileToTask_B_index" ON "public"."_FileToTask"("B")

CREATE UNIQUE INDEX "_CommentToTask_AB_unique" ON "public"."_CommentToTask"("A", "B")

CREATE INDEX "_CommentToTask_B_index" ON "public"."_CommentToTask"("B")

ALTER TABLE "public"."_ContactToUser" ADD FOREIGN KEY ("A")REFERENCES "public"."Contact"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "public"."_ContactToUser" ADD FOREIGN KEY ("B")REFERENCES "public"."User"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "public"."_ProjectToUser" ADD FOREIGN KEY ("A")REFERENCES "public"."Project"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "public"."_ProjectToUser" ADD FOREIGN KEY ("B")REFERENCES "public"."User"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "public"."_TaskToUser" ADD FOREIGN KEY ("A")REFERENCES "public"."Task"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "public"."_TaskToUser" ADD FOREIGN KEY ("B")REFERENCES "public"."User"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "public"."_FileToTask" ADD FOREIGN KEY ("A")REFERENCES "public"."File"("uid") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "public"."_FileToTask" ADD FOREIGN KEY ("B")REFERENCES "public"."Task"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "public"."_CommentToTask" ADD FOREIGN KEY ("A")REFERENCES "public"."Comment"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "public"."_CommentToTask" ADD FOREIGN KEY ("B")REFERENCES "public"."Task"("id") ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20200909091356-db
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,98 @@
+// This Prisma Schema file was created by Nexus
+// If you're new to Nexus or Prisma you may find these docs useful:
+//
+//   - Prisma plugin docs http://nxs.li/nexus-plugin-prisma
+//   - Prisma Schema docs https://pris.ly/d/prisma-schema
+
+// This "Example" model has been generated for you by Nexus.
+// Nexus does this when you do not have any models defined.
+// For more detail and examples of working with your Prisma
+// Schema, refer to its complete docs at https://pris.ly/d/prisma-schema.
+
+datasource db {
+  provider = "postgresql"
+  url = "***"
+}
+
+generator prisma_client {
+  provider = "prisma-client-js"
+}
+
+model User {
+  id         Int       @id @default(autoincrement())
+  email      String    @unique
+  name       String?
+  image      String?
+  position   String?
+  skills     String[]
+  contact    Contact[]
+  projectIds Project[]
+  taskIds    Task[]
+  contactId  Int
+  projectId  Int
+  taskId     Int
+  role       Role      @default(USER)
+}
+
+model Contact {
+  id        Int     @id
+  facebook  String?
+  twitter   String?
+  instagram String?
+  gitlab    String?
+  github    String?
+  User      User[]
+}
+
+model Project {
+  id            Int      @id
+  projectName   String?
+  projectType   String?
+  projectDetail String?
+  projectImage  String?
+  status        String?
+  dueDate       DateTime
+  memberIds     String[]
+  User          User[]
+}
+
+model Task {
+  id         Int       @id
+  projectId  String?
+  taskName   String?
+  startTime  DateTime
+  endTime    DateTime
+  taskDetail String?
+  isDone     Boolean
+  memberIds  String[]
+  files      File[]
+  comments   Comment[]
+  User       User[]
+  fileUid    Int
+  commentId  Int
+}
+
+model File {
+  uid    Int     @id
+  url    String?
+  name   String?
+  status String?
+  Task   Task[]
+}
+
+model Comment {
+  id        Int      @id
+  timestamp DateTime
+  userId    String?
+  image     String?
+  userImg   String?
+  userName  String?
+  message   String?
+  taskId    String?
+  Task      Task[]
+}
+
+enum Role {
+  USER
+  ADMIN
+}
```


