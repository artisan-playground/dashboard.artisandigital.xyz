# Migration `20210202062429`

This migration has been generated by Kullanan Thanachotnan at 2/2/2021, 1:24:29 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."clock-in" DROP CONSTRAINT "FK_671937e7cd75c119a91b8b40aa4"

ALTER TABLE "public"."request" DROP CONSTRAINT "FK_79311976fc74cffce78cfa0d31a"

ALTER TABLE "public"."RecentActivity" ADD COLUMN "projectId" integer   NOT NULL 

DROP TABLE "public"."clock-in"

DROP TABLE "public"."clock-out"

DROP TABLE "public"."request"

DROP TABLE "public"."user"

ALTER TABLE "public"."RecentActivity" ADD FOREIGN KEY("projectId")REFERENCES "public"."Project"("id") ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20210201122537..20210202062429
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 model User {
   id            Int             @id @default(autoincrement())
@@ -24,8 +24,9 @@
   startDate     DateTime?        @default(now())
   dueDate       DateTime?
   notifications Notification[]
   contents      Content[]
+  recentActivities  RecentActivity[]
   role          Role             @default(USER)
 }
 model Project {
@@ -39,8 +40,9 @@
   createdAt        DateTime?       @default(now())
   dueDate         DateTime?
   members         User[]
   tasks           Task[]
+  recentActivities  RecentActivity[]
 }
 model Task {
   id         Int          @id @default(autoincrement())
@@ -151,8 +153,10 @@
   message   String
   timestamp DateTime? @default(now())
   user      User      @relation(fields: [userId], references: [id])
   userId    Int
+  project    Project      @relation(fields: [projectId], references: [id])
+  projectId  Int
 }
 enum Role {
   ADMIN
```


